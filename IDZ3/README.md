# Третье индивидуальное домашнее задание по АВС

решение варианта можно найти по [ссылке](https://github.com/Babushkin05/HSE-ABC-OS-course/tree/main/IDZ3)

## Юридическая информация

Бабушкин Владимир Александрович, БПИ 237

вариант идз: 11

```
Разработать программу вычисления отдельно количества гласных и согласных букв в ASCII–строке.
Вывод результатов организовать в файл (используя соответствующие преобразования чисел в строки).
```
- Важно отметить, что не написано для какого языка должна работать программа, поэтому я написал для английского

[требования к работе](req-task-strings.pdf)

[варианты](task-strings.pdf)

## Решение


Я считываю строку из файла, для каждого символа строки я вызываю функцию ```letter_type```, которая определяет является ли символ гласной, согласной буквой или вообще что-то другое

Определяет она это, сравнивая символ со всеми гласными и со всеми согласными

Далее создаю из этих чисел строку вида:

```
number of vowels: %vowels_count
number of consonants: %consonants_count
```

и записываю ее в файл

Это базовый функционал, позже была добавлена возможность читать уже тестовые данные и выводить ответ в консоль, а не в файл

## Тесты

[beatles.txt](beatles.txt) - текст песни Let it be 

моя программа выдает такой результат:

```
number of vowels: 0307
number of consonants: 0498
```

[qeen.txt](qeen.txt) - текст песни Bohemian Rhapsody
```
number of vowels: 0622
number of consonants: 0782
```

[holy bible.txt](holy%20bible.txt) - Библия на английском

Поскольку в условиях указано, что программа должна корректно обрабатывать до 10 кБ данных, программа обрабатывает первые 10кБ из файла (вся Библия занимает 4+Мб)

Получается для первых 10Кб Библии:
```
number of vowels: 3023
number of consonants: 4507
```

*Стоит отметить, что тестовые программы довольно увесистые, поэтому их запуск занимает продолжительное время. Хоть Асимптотика программы линейная, но большая константа из-за проходов по заготовленным строкам значительно замедляет алгоритм.*

## Архитектура

![alt text](assets/architecture.png)

[main.asm](main.asm`) - программа запускающая другие файлы

[tester.asm](tester.asm) - программа запускающая тесты

[program.asm](program.asm) - выполняет всю логику по условию

[io_handler.asm](io_handler.asm) - состоит из 2 ключевых программ: подсчет гласных/согласных и составление строки

[string_handler.asm](string_handler.asm) -  состоит из 2 ключевых программ: читает файл, записывает в файл

также еще есть библиотека с макросами [macro-syscalls.m](macro-syscalls.m)

## Удовлетворяемость критериям

### 4-5

### Приведено решение программы на ассемблере. Программа из файла читает данные. Результаты записываются в другой файл.

Конечно

### Все изменяемые параметры программы вводятся с консоли.

Верно

### В программе присутствуют комментарии, поясняющие выполняе- мые ей действия.

Да, пример из файла [program.asm](program.asm)

```python
        # count vowels and consonants in file, 
		# takes string adres in a0 and strin size in a1, 
		# return vowels count in a0 consonants count in a1
		call counting_vowels_and_consonants
```

### Обработка данных, полученных из файла сформирована в виде отдельной подпрограммы.

Да, с помощью подпрограммы ```counting_vowels_and_consonants```


### В подкаталоге данных присутствуют файлы, используемые для те- стирования.

Да, подробнее смотрите в пункте тесты

### Буфер для текста программы имеет фиксированный размер размером не менее 4096 байт, допускающий ввод без искажений только тексты, ограниченные этим размером.

А вот тут неправда, потому что сделал по условиям следующих баллов, где сложнее

### При чтении файла размером, превышающим размер буфера, не должно происходить падения программы. Программа должна кор- ректно обработать введенный «урезанный» текст

Да, это тоже рассмотрел в разделе тесты

### Сформирован отчет с результатами тестовых прогонов и описани- ем используемых опций компиляции, проведенных модификаций ассемблерной программы.

Пример компиляции:

```
type 'Y' for start autotest, or something else to open your file:: **** user input : Y

Do you want to print output into console? (Y/N):: **** user input : Y
number of vowels: 0307
number of consonants: 0498
Do you want to print output into console? (Y/N):: **** user input : Y
number of vowels: 0622
number of consonants: 0782
Do you want to print output into console? (Y/N):: **** user input : Y
number of vowels: 3023
number of consonants: 4507
```

Остальное описал уже

